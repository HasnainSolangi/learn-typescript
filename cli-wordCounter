import inquirer from "inquirer";
import chalk from "chalk";


// Function to count words and display the result
async function countWords(sentence: string) {
    const words = sentence.trim().split(" ");
    console.log(words);
    console.log(chalk.blue(`Your sentence word count is ${words.length}`));
}

// Welcome message for the user
console.log(chalk.green("Welcome! Let's count the words in your sentence."));

// Prompt the user to enter a sentence
inquirer.prompt([
    {
        name: "Sentence",
        type: "input",
        message: "Enter your sentence to count the words:"
    }
]).then(async (answers: { Sentence: string }) => {
    await countWords(answers.Sentence);
    // Prompt for adding or removing words
    while (true) {
        const action = await inquirer.prompt([
            {
                name: "action",
                type: "list",
                message: "Do you want to add or remove a word?",
                choices: ["Add", "Remove", "Exit"]
            }
        ]);
        if (action.action === "Add") {
            const newWord = await inquirer.prompt([
                {
                    name: "word",
                    type: "input",
                    message: "Enter the word to add:"
                }
            ]);
            answers.Sentence += " " + newWord.word;
            await countWords(answers.Sentence);
        } else if (action.action === "Remove") {
            const wordToRemove = await inquirer.prompt([
                {
                    name: "word",
                    type: "input",
                    message: "Enter the word to remove:"
                }
            ]);
            if (answers.Sentence.includes(wordToRemove.word)) {
                answers.Sentence = answers.Sentence.replace(new RegExp(`\\b${wordToRemove.word}\\b`, "g"), "").replace(/\s{2,}/g, " ").trim();
                await countWords(answers.Sentence);
            } else {
                console.log(chalk.red("Sorry, the word you entered is not found in the sentence. Please enter a valid word to remove."));
            }
        } else {
            console.log(chalk.yellow("Thank you for using our word counter. See you soon!"));
            process.exit(0); // Exit the process
        }
    }
});
